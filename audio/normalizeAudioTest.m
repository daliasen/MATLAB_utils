function tests = normalizeAudioTest
    tests = functiontests(localfunctions);
end

function channelsRowsTest(testCase)
    input = [  1     2     3     4     5     6     7;
              10    20    30    40    50    60    70;
               0.1   0.2   0.3   0.4   0.5   0.6   0.7;
              -1    -2    -3    -4    -5    -6    -7;
             -10   -20   -30   -40   -50   -60   -70;
              -0.1  -0.2  -0.3  -0.4  -0.5  -0.6  -0.7];  % 3 channels x 7 samples

    % from Excel
    expected_output = [ 0.142842857	 0.285685714	 0.428528571	 0.571371429	 0.714214286	 0.857057143	 0.9999;
                        0.142842857	 0.285685714	 0.428528571	 0.571371429	 0.714214286	 0.857057143	 0.9999;
                        0.142842857	 0.285685714	 0.428528571	 0.571371429	 0.714214286	 0.857057143	 0.9999;
                       -0.142842857	-0.285685714	-0.428528571	-0.571371429	-0.714214286	-0.857057143	-0.9999;
                       -0.142842857	-0.285685714	-0.428528571	-0.571371429	-0.714214286	-0.857057143	-0.9999;
                       -0.142842857	-0.285685714	-0.428528571	-0.571371429	-0.714214286	-0.857057143	-0.9999];
               
    actual_output = normalizeAudio(input);
    
    tolerance = 0.1e-8;
    assert(isAlmostEqual(actual_output, expected_output, tolerance))
end

function channelsColumnsTest(testCase)
    input = [1 10 0.1 -1 -10 -0.1;
             2 20 0.2 -2 -20 -0.2;
             3 30 0.3 -3 -30 -0.3;
             4 40 0.4 -4 -40 -0.4;
             5 50 0.5 -5 -50 -0.5;
             6 60 0.6 -6 -60 -0.6;
             7 70 0.7 -7 -70 -0.7];  % 7 samples x 6 channels
    
    % from Excel
    expected_output = [0.142842857 0.142842857 0.142842857 -0.142842857	-0.142842857 -0.142842857
                       0.285685714 0.285685714 0.285685714 -0.285685714	-0.285685714 -0.285685714
                       0.428528571 0.428528571 0.428528571 -0.428528571	-0.428528571 -0.428528571
                       0.571371429 0.571371429 0.571371429 -0.571371429	-0.571371429 -0.571371429
                       0.714214286 0.714214286 0.714214286 -0.714214286	-0.714214286 -0.714214286
                       0.857057143 0.857057143 0.857057143 -0.857057143	-0.857057143 -0.857057143
                       0.9999      0.9999      0.9999      -0.9999      -0.9999      -0.9999];
	               
    actual_output = normalizeAudio(input);
    
    tolerance = 0.1e-8;
    assert(isAlmostEqual(actual_output, expected_output, tolerance))
end